{% extends "main.html" %}
{% block pagecontent %}

<h2>{{ number }} {{ entity}}</h2>

{% if is_deprecated %}
<div class="row">
    <div class="card fluid error">
        <p>
            <mark class="secondary">DEPRECATED</mark> This definition may be imported, but shall not be exported by applications
        </p>
    </div>
</div>
{% endif %}
{% if is_abstract %}
<div class="row">
    <div class="card fluid warning">
        <p>
            <mark class="secondary">ABSTRACT</mark> This definition may not be instantiated
        </p>
    </div>
</div>
{% endif %}

<h3>
    {{ definition_number }} Semantic definition
</h3>

{{ definition | safe }}

{% if attributes %}
<h3>
    {{ attributes.number }} Attributes
</h3>
{{ attributes.html | safe }}
{% endif %}

{% if entity_inheritance %}
<h3>
    {{ entity_inheritance.number }} Entity inheritance
</h3>
{{ entity_inheritance.graph | safe }}
{% endif %}

{% if concept_usage %}
<h3>
    {{ concept_usage.number }} Concept usage
</h3>
{{ concept_usage.html | safe }}
{% endif %}

{% if formal_representation %}
<h3>
    {{ formal_representation.number }} Formal representation
</h3>
<pre>
{{ formal_representation.express }}
</pre>
{% endif %}

{% if changelog %}
<h3>
    {{ changelog.number }} Changelog
</h3>
{% for section in changelog.sections %}
<h4>
    {{ section.number }} {{ section.name }}
</h4>
<table class="striped changelog">
    <thead>
        <tr>
            <th>Type</th>
            <th>Location</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        {% for change in section.changes %}
        <tr>
            <td data-label="Type">
                {% if change.is_addition %}<i data-feather="plus-square"></i>{% endif %}
                {% if change.is_deletion %}<i data-feather="x-square"></i>{% endif %}
                {% if change.is_modification %}<i data-feather="edit"></i>{% endif %}
            </td>
            <td data-label="Location">{{ change.what_changed }}</td>
            <td data-label="Description">{{ change.description }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endfor %}
{% endif %}
{% endblock %}
